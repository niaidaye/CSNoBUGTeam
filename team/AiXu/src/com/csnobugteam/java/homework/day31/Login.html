<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<body>

    <table cellspacing="10px">
        <tr>
            <td>注册邮箱:</td>
            <td><input id="emailInput"></td>
        </tr>
        <tr>
            <td></td>
            <td>你还可以使用手机注册</td>
        </tr>
        <tr>
            <td>创建密码:</td>
            <td><input></td>
        </tr>
        <tr>
            <td>真实姓名:</td>
            <td><input></td>
        </tr>
        <tr>
            <td>性别:</td>
            <td>
                <input type="radio">男
                <input type="radio">女
            </td>
        </tr>
        <tr>
            <td>生日:</td>
            <td>
                <label for="year">选择年份:</label>
                <select id="year" onchange="showMonth(this.value)">
                    <option value="">请选择</option>
                    <!-- 使用JavaScript动态填充年份 -->
                    <script>for (let year = 2023; year >= 1997; year--) { document.write("<option value='" + year + "'>" + year + "</option>"); }</script>
                </select>
                <br>
                <label for="month">选择月份:</label>
                <select id="month">
                    <option value="">请选择</option>
                    <!-- 使用JavaScript动态填充月份 -->
                </select>
                <br>
                <label for="day">选择日期:</label>
                <select id="day">
                    <option value="">请选择</option>
                    <!-- 使用JavaScript动态填充日期 -->
                </select>
            </td>
        </tr>
        <tr>
            <td>我正在:</td>
            <td>
                <select>
                    <option>学习</option>
                </select>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <img src="resource/verycode.gif" id="img1"> &nbsp; <span onclick="changeImg()">看不清,换一张</span>
            </td>
        </tr>
        <tr>
            <td>验证码:</td>
            <td><input id="inputString"></td>
        </tr>
        <tr>
            <td></td>
            <td>
                <img src="resource/btn_reg.gif" onclick="getCode()">
            </td>
        </tr>
    </table>
    <div id="emailValidationMessage" style="color: red;"></div>


    <script>

        const list = ["resource/1111.png", "resource/1234.png", "resource/2222.png", "resource/3333.png", "resource/4567.png"]
        const tag = -1
        const listCode = ["1111", "1234", "2222", "3333", "4567"]


        function changeImg() {
            const imgNode = document.getElementById("img1")
            const index = Math.floor(Math.random() * list.length)
            while (tag == index) {
                index = Math.floor(Math.random() * list.length)
            }
            tag = index
            imgNode.src = list[index]
        }

        function getCode() {
            const inputString = document.getElementById("inputString").value
            if (tag == -1) {
                if ('BnKsU' == inputString) {
                    alert("验证码正确")
                } else {
                    alert("验证码错误")
                }
                return
            }

            if (listCode[tag] == inputString) {
                alert("验证码正确")
            } else {
                alert("验证码错误")
            }
        }

        // 邮箱验证
        document.getElementById('emailInput').addEventListener('input', function (e) {
            const emailInput = e.target.value;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (emailRegex.test(emailInput)) {
                document.getElementById('emailValidationMessage').textContent = '邮箱格式正确';
            } else {
                document.getElementById('emailValidationMessage').textContent = '邮箱格式错误';
            }
        });

        // 选择年份，带出月，选择月带出日
        function showMonth(year) {
            console.log(year);
            let month = document.getElementById('month');
            let day = document.getElementById('day');


            let monthOptions = ['请选择'];
            let dayOptions = ['请选择'];
            // 使用JavaScript动态填充月份和日期  
            for (let monthNumber = 1; monthNumber <= 12; monthNumber++) {
                monthOptions.push(monthNumber + '月'); // monthNumber + '月' 添加到选项中  
            }
            for (let dayNumber = 1; dayNumber <= 31; dayNumber++) { // 假设每个月都有31天，实际上可以根据选择的月份来调整最大值。  
                dayOptions.push(dayNumber + '日'); // dayNumber + '日' 添加到选项中  
            }

            month.innerHTML = monthOptions.join('\n'); // 将月份选项添加到下拉列表中  


            day.innerHTML = dayOptions.join('\n'); // 将日期选项添加到下拉列表中  

            // 为月份的option赋值  
            month.value = ''; // 清空默认选项  
            for (let i = 0; i < monthOptions.length; i++) {
                let option = document.createElement('option');
                option.value = monthOptions[i];
                option.text = monthOptions[i];
                month.appendChild(option);
            }

            // 为月份的option赋值  
            day.value = ''; // 清空默认选项  
            for (let i = 0; i < dayOptions.length; i++) {
                let option = document.createElement('option');
                option.value = dayOptions[i];
                option.text = dayOptions[i];
                day.appendChild(option);
            }

            console.log(month);
            console.log(month.innerHTML);
        }
    </script>

</body>

</html>